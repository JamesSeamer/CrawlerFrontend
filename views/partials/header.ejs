<!DOCTYPE html>
<html>
<head>
    <title>Web Crawler</title>
    <link rel="stylesheet" href="/css/main.css">
</head>
<body>
  <header>
    <h1>Web Crawler</h1>
    <nav>
      <a href="/">Home</a>
      <a href="/4xx">4xx</a>
      <a href="/images">Images</a>
      <a href="/submit_crawl">Submit Crawl</a>
      <a href="/meta">Meta</a>      
    </nav>
    <button id="openCrawlPopup" style="margin-left:20px;">
        <% if (activeCrawlId) { 
            const selectedCrawl = crawls.find(c => c.id === Number(activeCrawlId));
        %>
        Crawl: <%= selectedCrawl.start_url %>
        <% } else { %>
        Select Crawl
        <% } %>
    </button>

    <div id="crawlPopup" class="popup" style="display:none;">
        <div class="popup-content">
            <span id="closeCrawlPopup" style="cursor:pointer; float:right;">&times;</span>
            <h2>Select a Crawl</h2>
            <table>
            <thead>
                <tr>
                <th>ID</th>
                <th>Start URL</th>
                <th>Start Time</th>
                <th># URLs</th>
                <th>Select</th>
                </tr>
            </thead>
            <tbody>
                <% crawls.forEach(crawl => { %>
                <tr>
                    <td><%= crawl.id %></td>
                    <td><%= crawl.start_url %></td>
                    <td><%= crawl.start_time.toISOString().slice(0,19).replace('T',' ') %></td>
                    <td><%= crawl.url_count %></td>
                    <td>
                    <form method="POST" action="/set-crawl">
                        <input type="hidden" name="crawlId" value="<%= crawl.id %>">
                        <button type="submit">Select</button>
                    </form>
                    </td>
                </tr>
                <% }) %>
            </tbody>
            </table>
        </div>
    </div>
  </header>
  <main>
